frontend kubeAPI
    bind :6443
    mode tcp
    default_backend kubeAPI_backend
frontend konnectivity
    bind :8132
    mode tcp
    default_backend konnectivity_backend
frontend controllerJoinAPI
    bind :9443
    mode tcp
    default_backend controllerJoinAPI_backend

backend kubeAPI_backend
    mode tcp
    %{ for c in controllers ~}
    server ${c.name} ${c.addr}:6443 check check-ssl verify none
    %{ endfor ~}
backend konnectivity_backend
    mode tcp
    %{ for c in controllers ~}
    server ${c.name} ${c.addr}:6443 check check-ssl verify none
    %{ endfor ~}
backend controllerJoinAPI_backend
    mode tcp
    %{ for c in controllers ~}
    server ${c.name} ${c.addr}:6443 check check-ssl verify none
    %{ endfor ~}

listen stats
    bind *:9000
    mode http
    stats enable
    stats uri /
